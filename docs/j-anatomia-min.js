!function(){"use strict";function init(){showDebugMsg("init"),updateOrderCountFromField(),addEventListeners(),updateUtm(),updateOrderString(),listenToOrderCount(),initGumShoe(),anCoverAnimate()}function updateUtm(){void 0!==window.ga&&ga((function(e){void 0!==e.get("campaignSource")&&(a.utmSource=e.get("campaignSource")),void 0!==e.get("campaignName")&&(a.utmCampaign=e.get("campaignName")),void 0!==e.get("campaignMedium")&&(a.utmMedium=e.get("campaignMedium"))}))}function addEventListeners(){window.addEventListener("click",clickHandler,!1)}function clickHandler(e){var t;if(null===(t=getClosest(e.target,".js-plus"))&&(t=getClosest(e.target,".js-minus")),null===t&&(t=getClosest(e.target,".js-slider")),null===t&&(t=getClosest(e.target,".js-opinie")),null!==t)if(showDebugMsg(t),t.classList.contains("js-plus"))addOrderCount(t);else{if(!t.classList.contains("js-minus"))return t.classList.contains("js-slider")?(e.preventDefault(),e.stopPropagation(),void sliderMove(t,e)):t.classList.contains("js-opinie")?(e.preventDefault(),e.stopPropagation(),void openOpinie(t,e)):void 0;substractOrderCount(t)}}function addOrderCount(){o=parseInt(o)+1,updateOrder()}function substractOrderCount(){o=parseInt(o)-1,updateOrder()}function updateOrder(){checkOrderCount(),updateOrderSum(),updateOrderString(),updateOrderCount()}function checkOrderCount(){showDebugMsg("check order count"),o<1&&(showDebugMsg("order count corrected"),o=1)}function updateOrderCountFromField(){isNaN(parseInt(n.orderCount.value))&&""!==n.orderCount.value?(showDebugMsg("field value was NaN"),o=1,updateOrder()):isNaN(parseInt(n.orderCount.value))||parseInt(n.orderCount.value)===o||(showDebugMsg("update order count from field"),o=n.orderCount.value,updateOrder())}function updateOrderCount(){showDebugMsg("check order count field"),n.orderCount.value=o}function updateOrderSum(){var e=0;o<6?e=399*o:o<11?e=349*o:o<31?e=319*o:o>30&&(e=299*o),showDebugMsg("orderSum: "+(i=e))}function updateOrderString(){var e="";showDebugMsg("newOrderString: "+o),a.utmSource.length>0&&(e+="&utm_source="+a.utmSource),a.utmMedium.length>0&&(e+="&utm_medium="+a.utmMedium),a.utmCampaign.length>0&&(e+="&utm_campaign="+a.utmCampaign);var i="bagx="+o;n.orderLink.href=t+"?"+i+e,n.orderLink.setAttribute("data-ga-label",i)}function listenToOrderCount(){n.orderCount.addEventListener("input",(function(e){updateOrderCountFromField()}),!1)}function sliderMove(e){var t=e.getAttribute("href").slice(1),n=document.getElementById(t),o=e.getAttribute("data-ns-slider"),i=document.getElementById(o);showDebugMsg(n),showDebugMsg(i),Velocity(n,"scroll",{duration:600,container:i,axis:"x",easing:"easeOutCubic",queue:!1,begin:function(){i.classList.add("anatomia-slides--animating")},complete:function(){i.classList.remove("anatomia-slides--animating")}})}function openOpinie(e,t){function openP(e){Velocity(e,"slideDown",{duration:500,easing:"easeInOut",display:"block"})}var n=e.getAttribute("href").slice(1),o,i=document.getElementById(n).childNodes;showDebugMsg(i);var a=1,r=i.length;for(Velocity(e,"fadeOut",{duration:500,easing:"easeInOut",complete:function(){e.parentNode.removeChild(e)}});a<r;a++)i[a].tagName&&"anatomia-opinie__open-q"!==i[a].className&&openP(i[a])}function showDebugMsg(t){e&&window.console.log(t)}function initGumShoe(){var e=new Gumshoe("#navMain a",{navClass:"js-active",events:!0,offset:function(){return document.getElementById("navMain").getBoundingClientRect().height}})}function anCoverAnimate(){function animateMask(e){showDebugMsg("animation no: "+r),Velocity(e,{opacity:[1,0]},{duration:150,easing:"easeInCubic"}),Velocity(e,{opacity:0},{duration:7e3,easing:"easeOutSine",complete:function(){t.removeChild(e)}})}function reveal(e){if(Velocity(n,"stop"),Velocity(n,{opacity:[1,0]},{duration:450,easing:"easeInCubic"}),Velocity(n,{opacity:0},{duration:7e3,delay:450,easing:"easeOutSine"}),void 0!==e)try{gtag("event","Anatomy Click",{event_category:"Cover",event_label:"Reveal"})}catch(e){}}function createNewCircle(e){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("r",150),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("opacity",0),n.setAttribute("fill","url(#radialGradient)"),t.appendChild(n),n}function createSingleAnimation(e){var t,n,o,i;if(void 0!==e){showDebugMsg("createSingleAnimation has event"),showDebugMsg("event.clientX: "+e.clientX),showDebugMsg("event.clientY: "+e.clientY),t=convertCoords({x:e.clientX,y:e.clientY}),o="X: "+Math.floor(t.x)+"; Y: "+Math.floor(t.y);try{gtag("event","Anatomy Click",{event_category:"Cover",event_label:o})}catch(e){}}else showDebugMsg("createSingleAnimation no event"),t=convertCoords(getRandomCoords());animateMask(n=createNewCircle(t)),r>10&&(reveal(e),r=0)}function getRandomNum(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function convertCoords(t){a.x=t.x,a.y=t.y,showDebugMsg("convertCoords, cursorpt");var n=a.matrixTransform(e.getScreenCTM().inverse());return showDebugMsg("x: "+n.x+" | y: "+n.y),{x:n.x,y:n.y}}function getRandomCoords(){var t=e.getBoundingClientRect().left,n=e.getBoundingClientRect().top,o,i,a,r,s=e.clientWidth,c=e.clientHeight;return showDebugMsg(u),"head"===u?(a={min:.4*s,max:s-.38*s},r={min:.15*c,max:.68*c},u="body"):(a={min:.15*s,max:s-.15*s},r={min:.75*c,max:c-.05*c},u="head"),o=getRandomNum(a.min,a.max),i=getRandomNum(r.min,r.max),showDebugMsg("randX: "+o),showDebugMsg("randY: "+i),{x:t+o,y:n+i}}function testRandomCoords(t){void 0===t&&(t=convertCoords(getRandomCoords())),showDebugMsg(t);var n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("r",20),n.setAttribute("cx",t.x),n.setAttribute("cy",t.y),n.setAttribute("opacity",.75),"head"===u?n.setAttribute("fill","#900"):n.setAttribute("fill","#090"),e.appendChild(n)}function easing(e){var t=e-1;return 1-t*t*t*t}function generateIntervals(e,t){var n,o=[],i=e/(t-1),a,r,u=0;for(n=0;n<=t-1;n++)r=easing(a=i*n/e),o[n]=r*e;return showDebugMsg(o),showDebugMsg(0),o}function startOnScrollAnimation(){function startTimer(e,t){t?setTimeout((function(){reveal()}),e+50):setTimeout((function(){createSingleAnimation()}),e)}if(i){var e;i=!1;var t=16,n=!1,a,r=0,u=3200,s=generateIntervals(3200,16);for(animateMask(o),e=1;e<=16;e++)void 0!==s[e]&&(r=s[e]),showDebugMsg(r),16===e&&(n=!0),startTimer(r,n);try{gtag("event","Anatomy Click",{event_category:"Cover",event_label:"On Scroll Animation"})}catch(e){}}}function handleClicks(e){showDebugMsg(e),r+=1,createSingleAnimation(e)}var e=document.getElementById("an-website-cover"),t=e.getElementById("mask-chick"),n=e.getElementById("an-reveal"),o=e.getElementById("circle-1"),i=!0,a=e.createSVGPoint(),r=0,u="head",s;scrollama().setup({step:".step",offset:.4}).onStepEnter((function(){startOnScrollAnimation()})),showDebugMsg(e.clientWidth),e.addEventListener("click",(function(e){handleClicks(e),e.stopPropagation()}))}var e=!1;""!==location.hostname&&"localhost"!==location.hostname&&"grenaten.local"!==location.hostname||(e=!0,showDebugMsg("Debug mode on"));var t="https://nocnasowa.pl/kassa/",n={orderCount:document.getElementById("order-count"),orderMinus:document.getElementById("order-minus"),orderPlus:document.getElementById("order-plus"),orderLink:document.getElementById("order-link")},o=1,i=399,a={utmSource:"",utmMedium:"",utmCampaign:""};window.addEventListener("load",(function(){init()}),!1),document.addEventListener("gumshoeActivate",(function(e){e.detail.link.classList.add("btn-black--active","navbar__btn--active"),scrollNavToActiveEl("navMain")}),!1),document.addEventListener("gumshoeDeactivate",(function(e){e.detail.link.classList.remove("btn-black--active","navbar__btn--active")}),!1)}();