!function(){"use strict";function init(){showDebugMsg("init"),updateOrderCountFromField(),addEventListeners(),updateUtm(),updateOrderString(),listenToOrderCount(),initGumShoe()}function updateUtm(){void 0!==window.ga&&ga((function(e){void 0!==e.get("campaignSource")&&(o.utmSource=e.get("campaignSource")),void 0!==e.get("campaignName")&&(o.utmCampaign=e.get("campaignName")),void 0!==e.get("campaignMedium")&&(o.utmMedium=e.get("campaignMedium"))}))}function addEventListeners(){window.addEventListener("click",clickHandler,!1)}function clickHandler(e){var t;if(null===(t=getClosest(e.target,".js-plus"))&&(t=getClosest(e.target,".js-minus")),null===t&&(t=getClosest(e.target,".js-slider")),null===t&&(t=getClosest(e.target,".js-opinie")),null!==t)if(showDebugMsg(t),t.classList.contains("js-plus"))addOrderCount(t);else{if(!t.classList.contains("js-minus"))return t.classList.contains("js-slider")?(e.preventDefault(),e.stopPropagation(),void sliderMove(t,e)):t.classList.contains("js-opinie")?(e.preventDefault(),e.stopPropagation(),void openOpinie(t,e)):void 0;substractOrderCount(t)}}function addOrderCount(){a=parseInt(a)+1,updateOrder()}function substractOrderCount(){a=parseInt(a)-1,updateOrder()}function updateOrder(){checkOrderCount(),updateOrderSum(),updateOrderString(),updateOrderCount()}function checkOrderCount(){showDebugMsg("check order count"),a<1&&(showDebugMsg("order count corrected"),a=1)}function updateOrderCountFromField(){isNaN(parseInt(n.orderCount.value))&&""!==n.orderCount.value?(showDebugMsg("field value was NaN"),a=1,updateOrder()):isNaN(parseInt(n.orderCount.value))||parseInt(n.orderCount.value)===a||(showDebugMsg("update order count from field"),a=n.orderCount.value,updateOrder())}function updateOrderCount(){showDebugMsg("check order count field"),n.orderCount.value=a}function updateOrderSum(){var e=0;a<6?e=399*a:a<11?e=349*a:a<31?e=319*a:a>30&&(e=299*a),showDebugMsg("orderSum: "+(i=e))}function updateOrderString(){var e="";showDebugMsg("newOrderString: "+a),o.utmSource.length>0&&(e+="&utm_source="+o.utmSource),o.utmMedium.length>0&&(e+="&utm_medium="+o.utmMedium),o.utmCampaign.length>0&&(e+="&utm_campaign="+o.utmCampaign);var i="bagx="+a;n.orderLink.href=t+"?"+i+e,n.orderLink.setAttribute("data-ga-label",i)}function listenToOrderCount(){n.orderCount.addEventListener("input",(function(e){updateOrderCountFromField()}),!1)}function sliderMove(e){var t=e.getAttribute("href").slice(1),n=document.getElementById(t),a=e.getAttribute("data-ns-slider"),i=document.getElementById(a);showDebugMsg(n),showDebugMsg(i),Velocity(n,"scroll",{duration:600,container:i,axis:"x",easing:"easeOutCubic",queue:!1,begin:function(){i.classList.add("anatomia-slides--animating")},complete:function(){i.classList.remove("anatomia-slides--animating")}})}function openOpinie(e,t){function openP(e){Velocity(e,"slideDown",{duration:500,easing:"easeInOut",display:"block"})}var n=e.getAttribute("href").slice(1),a,i=document.getElementById(n).childNodes;showDebugMsg(i);var o=1,r=i.length;for(Velocity(e,"fadeOut",{duration:500,easing:"easeInOut",complete:function(){e.parentNode.removeChild(e)}});o<r;o++)i[o].tagName&&"anatomia-opinie__open-q"!==i[o].className&&openP(i[o])}function showDebugMsg(t){e&&window.console.log(t)}function initGumShoe(){var e=new Gumshoe("#navMain a",{navClass:"js-active",events:!0,offset:function(){return document.getElementById("navMain").getBoundingClientRect().height}})}function anCoverAnimate(){function animateMask(e){Velocity(e,{opacity:1},{duration:150,easing:"easeInCubic"}),Velocity(e,{opacity:0},{duration:7e3,easing:"easeOutSine",complete:function(){t.removeChild(e)}})}function reveal(){Velocity(n,"stop"),Velocity(n,{opacity:1},{duration:450,easing:"easeInCubic"}),Velocity(n,{opacity:0},{duration:7e3,delay:450,easing:"easeOutSine"})}function createNewCircle(e){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("r",150),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("opacity",0),n.setAttribute("fill","url(#radialGradient)"),t.appendChild(n),n}function handleClicks(e){showDebugMsg(e);var t=getCoords(e),n;if(animateMask(createNewCircle(t)),(i+=1)>10){reveal(),i=0;try{gtag("event","Anatomy Click",{event_category:"Cover",event_label:"Reveal"})}catch(e){}}var a="X: "+Math.floor(t.x)+"; Y: "+Math.floor(t.y);try{gtag("event","Anatomy Click",{event_category:"Cover",event_label:a})}catch(e){}}function getCoords(t){o.x=t.clientX,o.y=t.clientY;var n=o.matrixTransform(e.getScreenCTM().inverse());return{x:n.x,y:n.y}}var e=document.getElementById("an-website-cover"),t=e.getElementById("mask-chick"),n=e.getElementById("an-reveal"),a=e.getElementById("circle-1"),i=0;e.addEventListener("click",(function(e){handleClicks(e),e.stopPropagation()}));var o=e.createSVGPoint(),r;scrollama().setup({step:".step",offset:.5}).onStepEnter((function(){animateMask(a)}))}var e=!1;""!==location.hostname&&"localhost"!==location.hostname||(e=!0,showDebugMsg("Debug mode on"));var t="https://nocnasowa.pl/kassa/",n={orderCount:document.getElementById("order-count"),orderMinus:document.getElementById("order-minus"),orderPlus:document.getElementById("order-plus"),orderLink:document.getElementById("order-link")},a=1,i=399,o={utmSource:"",utmMedium:"",utmCampaign:""};window.addEventListener("load",(function(){init()}),!1),document.addEventListener("gumshoeActivate",(function(e){e.detail.link.classList.add("btn-black--active","navbar__btn--active"),scrollNavToActiveEl("navMain")}),!1),document.addEventListener("gumshoeDeactivate",(function(e){e.detail.link.classList.remove("btn-black--active","navbar__btn--active")}),!1)}();